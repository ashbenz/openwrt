From f09e6dbe2fffe96a9efb8a9c5ad8a53343f47cad Mon Sep 17 00:00:00 2001
From: Pavel Kubelun <be.dissent@gmail.com>
Date: Sun, 14 Jan 2018 01:55:44 +0300
Subject: [PATCH] fix nss gmac k4.14

---
 ipq806x/nss_gmac_ctrl.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/ipq806x/nss_gmac_ctrl.c b/ipq806x/nss_gmac_ctrl.c
index 5d1f9a5..36bb12a 100644
--- a/ipq806x/nss_gmac_ctrl.c
+++ b/ipq806x/nss_gmac_ctrl.c
@@ -318,14 +318,14 @@ void nss_gmac_tx_rx_desc_init(struct nss_gmac_dev *gmacdev)
  * @param[in] pointer to net_device_stats64 structure.
  * @return Returns pointer to net_device_stats64 structure.
  */
-struct rtnl_link_stats64 *nss_gmac_get_stats64(struct net_device *netdev,
+void nss_gmac_get_stats64(struct net_device *netdev,
 						struct rtnl_link_stats64 *stats)
 {
 	struct nss_gmac_dev *gmacdev = (struct nss_gmac_dev *)netdev_priv(netdev);
 	BUG_ON(gmacdev == NULL);
 
 	if (!gmacdev->data_plane_ops)
-		return stats;
+		return;
 
 	spin_lock_bh(&gmacdev->stats_lock);
 	gmacdev->data_plane_ops->get_stats(gmacdev->data_plane_ctx, &gmacdev->nss_stats);
@@ -349,7 +349,6 @@ struct rtnl_link_stats64 *nss_gmac_get_stats64(struct net_device *netdev,
 	stats->tx_window_errors = gmacdev->nss_stats.tx_late_collision_errors;
 	spin_unlock_bh(&gmacdev->stats_lock);
 
-	return stats;
 }
 
 
--
Working Copy 3.0.6

